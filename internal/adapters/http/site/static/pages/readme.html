<!doctype html><html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="stylesheet" href="./assets/site.css"><title>CUJU Senior GO Engineer — System Design + Coding Task</title></head><body><div class="layout"><aside id="sidebar"></aside><main><article><h1>CUJU Senior GO Engineer — System Design + Coding Task</h1>
<h3>Coding Task</h3>
<p>A Leaderboard Ingest + Query service with idempotent event intake, concurrent processing, and fast reads—but all in one process with in-memory storage (no external deps).</p>
<p>Build a single Go service that accepts performance events, deduplicates by `event_id`, asynchronously “scores” them (simulate 80–150ms latency), and maintains an in-memory Global leaderboard (best score per talent).</p>
<p>Expose:</p>
<ul>
<li>**POST /events**</li>
<ul>
<li>**GET /leaderboard?limit=N**</li>
<ul>
<li>**GET /rank/{talent\_id}**</li>
<ul>
<li>**/healthz**</li>
</ul>
<p>Include a short design note, which should contain a sequence diagram with user interactions, a README with run/curl examples, and a few tests. Aim for 60–90 minutes; avoid over-engineering.</p>
<p>---</p>
<h3>Functional scope</h3>
<p>#### 1. POST /events</p>
<ul>
<li>Body:</li>
</ul>
<p><pre><code>json
  { &quot;event_id&quot;: &quot;uuid&quot;, &quot;talent_id&quot;: &quot;t1&quot;, &quot;raw_metric&quot;: 42, &quot;skill&quot;: &quot;dribble&quot;, &quot;ts&quot;: &quot;RFC3339&quot; }</code></pre></p>
<ul>
<li>Idempotent on `event_id` (replays ignored).</li>
<ul>
<li>Returns 202 on accepted, 200 on duplicate.</li>
</ul>
<p>#### 2. Scoring (local stub, no HTTP)</p>
<ul>
<li>Compute `score = f(raw_metric, skill)` with a random **80–150ms** delay to simulate ML latency.</li>
<p>Example: `score = raw_metric * weight(skill)`.</p>
<p>#### 3. Leaderboard update</p>
<ul>
<li>Maintain a single Global leaderboard (Top-N by score, higher is better).</li>
<ul>
<li>Track per-talent best score only.</li>
</ul>
<p>#### 4. GET /leaderboard?limit=N</p>
<ul>
<li>Returns Top-N:</li>
</ul>
<p><pre><code>json
  [{&quot;rank&quot;:1,&quot;talent_id&quot;:&quot;…&quot;,&quot;score&quot;:…}, …]</code></pre></p>
<p>#### 5. GET /rank/{talent\_id}</p>
<ul>
<li>Returns the caller’s current rank and score.</li>
</ul>
<p>---</p>
<h3>Non-functional checks</h3>
<ul>
<li>Safe concurrent updates (multiple POST /events in parallel).</li>
<ul>
<li>Basic performance: **p95 read < 40ms locally** for `GET /leaderboard?limit=50` after a burst of writes.</li>
<ul>
<li>Minimal observability: `/healthz` + counters (processed events, dedup hits). (Prometheus optional.)</li>
</ul>
<p>---</p>
<h3>Example payloads</h3>
<p>**POST /events**</p>
<p><pre><code>json
{
  &quot;event_id&quot;: &quot;8c1b7c3e-3b1f-4a19-9d49-0f5f0d1c9a11&quot;,
  &quot;talent_id&quot;: &quot;t-123&quot;,
  &quot;raw_metric&quot;: 37.5,
  &quot;skill&quot;: &quot;dribble&quot;,
  &quot;ts&quot;: &quot;2025-08-28T09:15:00Z&quot;
}</code></pre></p>
<p>**GET /leaderboard?limit=3**</p>
<p><pre><code>json
[
  {&quot;rank&quot;:1, &quot;talent_id&quot;:&quot;t-123&quot;, &quot;score&quot;:112.5},
  {&quot;rank&quot;:2, &quot;talent_id&quot;:&quot;t-777&quot;, &quot;score&quot;:98.0},
  {&quot;rank&quot;:3, &quot;talent_id&quot;:&quot;t-555&quot;, &quot;score&quot;:91.2}
]</code></pre></p>
<p>**GET /rank/t-123**</p>
<p><pre><code>json
{&quot;rank&quot;:1, &quot;talent_id&quot;:&quot;t-123&quot;, &quot;score&quot;:112.5}</code></pre></p>
<p>---</p>
<h3>Format of delivery</h3>
<ul>
<li>Send as **ZIP file** or a **GitHub/GitLab repo**.</li>
<ul>
<li>There will be a call where you walk through your task and thoughts.</li>
</ul>
<p>---</p>
<h3>System Design</h3>
<p>One short page (could be in README) covering:</p>
<ul>
<li>**Sequence Diagram (event flow):** From User request to create an event to Leaderboard store.</li>
<ul>
<li>**Data model:**</li>
</ul>
<p>* `scores[talent_id] = bestScore`   * ranking structure</p>
<ul>
<li>**Trade-offs:** Why in-mem + snapshot omitted, eventual vs. strong consistency.</li>
<ul>
<li>**Thoughts:** Design differences between MVP for a few hundred users (closed Beta) vs. a service catering to **30M AUs** in multiple countries (Brazil, Germany, South Africa).</li>
</article></main></div><script src="./assets/site.js"></script></body></html>